{"ast":null,"code":"/**\n * Atropos 1.0.1\n * Touch-friendly 3D parallax hover effects\n * https://atroposjs.com\n *\n * Copyright 2021-2021 \n *\n * Released under the MIT License\n *\n * Released on: October 18, 2021\n */\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n/* eslint-disable no-restricted-globals */\n\n\nvar $ = function $(el, sel) {\n  return el.querySelector(sel);\n};\n\nvar $$ = function $$(el, sel) {\n  return el.querySelectorAll(sel);\n};\n\nvar removeUndefinedProps = function removeUndefinedProps(obj) {\n  if (obj === void 0) {\n    obj = {};\n  }\n\n  var result = {};\n  Object.keys(obj).forEach(function (key) {\n    if (typeof obj[key] !== 'undefined') result[key] = obj[key];\n  });\n  return result;\n};\n\nfunction Atropos(originalParams) {\n  if (originalParams === void 0) {\n    originalParams = {};\n  }\n\n  var _originalParams = originalParams,\n      el = _originalParams.el,\n      eventsEl = _originalParams.eventsEl;\n  var self = {\n    __atropos__: true,\n    params: _extends({\n      alwaysActive: false,\n      activeOffset: 50,\n      shadowOffset: 50,\n      shadowScale: 1,\n      duration: 300,\n      rotate: true,\n      rotateTouch: true,\n      rotateXMax: 15,\n      rotateYMax: 15,\n      rotateXInvert: false,\n      rotateYInvert: false,\n      stretchX: 0,\n      stretchY: 0,\n      stretchZ: 0,\n      commonOrigin: true,\n      shadow: true,\n      highlight: true,\n      onEnter: null,\n      onLeave: null,\n      onRotate: null\n    }, removeUndefinedProps(originalParams || {})),\n    destroyed: false,\n    isActive: false\n  };\n  var params = self.params;\n  var rotateEl;\n  var scaleEl;\n  var innerEl;\n  var elBoundingClientRect;\n  var eventsElBoundingClientRect;\n  var shadowEl;\n  var highlightEl;\n  var isScrolling;\n  var clientXStart;\n  var clientYStart;\n  var queue = [];\n  var queueFrameId;\n\n  var purgeQueue = function purgeQueue() {\n    queueFrameId = requestAnimationFrame(function () {\n      queue.forEach(function (data) {\n        if (typeof data === 'function') {\n          data();\n        } else {\n          var element = data.element,\n              prop = data.prop,\n              value = data.value;\n          element.style[prop] = value;\n        }\n      });\n      queue.splice(0, queue.length);\n      purgeQueue();\n    });\n  };\n\n  purgeQueue();\n\n  var $setDuration = function $setDuration(element, value) {\n    queue.push({\n      element: element,\n      prop: 'transitionDuration',\n      value: value\n    });\n  };\n\n  var $setEasing = function $setEasing(element, value) {\n    queue.push({\n      element: element,\n      prop: 'transitionTimingFunction',\n      value: value\n    });\n  };\n\n  var $setTransform = function $setTransform(element, value) {\n    queue.push({\n      element: element,\n      prop: 'transform',\n      value: value\n    });\n  };\n\n  var $setOpacity = function $setOpacity(element, value) {\n    queue.push({\n      element: element,\n      prop: 'opacity',\n      value: value\n    });\n  };\n\n  var $setOrigin = function $setOrigin(element, value) {\n    queue.push({\n      element: element,\n      prop: 'transformOrigin',\n      value: value\n    });\n  };\n\n  var $on = function $on(element, event, handler, props) {\n    return element.addEventListener(event, handler, props);\n  };\n\n  var $off = function $off(element, event, handler, props) {\n    return element.removeEventListener(event, handler, props);\n  };\n\n  var createShadow = function createShadow() {\n    var created;\n    shadowEl = $(el, '.atropos-shadow');\n\n    if (!shadowEl) {\n      shadowEl = document.createElement('span');\n      shadowEl.classList.add('atropos-shadow');\n      created = true;\n    }\n\n    $setTransform(shadowEl, \"translate3d(0,0,-\" + params.shadowOffset + \"px) scale(\" + params.shadowScale + \")\");\n\n    if (created) {\n      rotateEl.appendChild(shadowEl);\n    }\n  };\n\n  var createHighlight = function createHighlight() {\n    var created;\n    highlightEl = $(el, '.atropos-highlight');\n\n    if (!highlightEl) {\n      highlightEl = document.createElement('span');\n      highlightEl.classList.add('atropos-highlight');\n      created = true;\n    }\n\n    $setTransform(highlightEl, \"translate3d(0,0,0)\");\n\n    if (created) {\n      innerEl.appendChild(highlightEl);\n    }\n  };\n\n  var setChildrenOffset = function setChildrenOffset(_ref) {\n    var _ref$rotateXPercentag = _ref.rotateXPercentage,\n        rotateXPercentage = _ref$rotateXPercentag === void 0 ? 0 : _ref$rotateXPercentag,\n        _ref$rotateYPercentag = _ref.rotateYPercentage,\n        rotateYPercentage = _ref$rotateYPercentag === void 0 ? 0 : _ref$rotateYPercentag,\n        duration = _ref.duration,\n        opacityOnly = _ref.opacityOnly,\n        easeOut = _ref.easeOut;\n\n    var getOpacity = function getOpacity(element) {\n      if (element.dataset.atroposOpacity && typeof element.dataset.atroposOpacity === 'string') {\n        return element.dataset.atroposOpacity.split(';').map(function (v) {\n          return parseFloat(v);\n        });\n      }\n\n      return undefined;\n    };\n\n    $$(el, '[data-atropos-offset], [data-atropos-opacity]').forEach(function (childEl) {\n      $setDuration(childEl, duration);\n      $setEasing(childEl, easeOut ? 'ease-out' : '');\n      var elementOpacity = getOpacity(childEl);\n\n      if (rotateXPercentage === 0 && rotateYPercentage === 0) {\n        if (!opacityOnly) $setTransform(childEl, \"translate3d(0, 0, 0)\");\n        if (elementOpacity) $setOpacity(childEl, elementOpacity[0]);\n      } else {\n        var childElOffset = parseFloat(childEl.dataset.atroposOffset) / 100;\n\n        if (!Number.isNaN(childElOffset) && !opacityOnly) {\n          $setTransform(childEl, \"translate3d(\" + -rotateYPercentage * -childElOffset + \"%, \" + rotateXPercentage * -childElOffset + \"%, 0)\");\n        }\n\n        if (elementOpacity) {\n          var min = elementOpacity[0],\n              max = elementOpacity[1];\n          var rotatePercentage = Math.max(Math.abs(rotateXPercentage), Math.abs(rotateYPercentage));\n          $setOpacity(childEl, min + (max - min) * rotatePercentage / 100);\n        }\n      }\n    });\n  };\n\n  var setElements = function setElements(clientX, clientY) {\n    var isMultiple = el !== eventsEl;\n\n    if (!elBoundingClientRect) {\n      elBoundingClientRect = el.getBoundingClientRect();\n    }\n\n    if (isMultiple && !eventsElBoundingClientRect) {\n      eventsElBoundingClientRect = eventsEl.getBoundingClientRect();\n    }\n\n    if (typeof clientX === 'undefined' && typeof clientY === 'undefined') {\n      var rect = isMultiple ? eventsElBoundingClientRect : elBoundingClientRect;\n      clientX = rect.left + rect.width / 2;\n      clientY = rect.top + rect.height / 2;\n    }\n\n    var rotateX = 0;\n    var rotateY = 0;\n    var _elBoundingClientRect = elBoundingClientRect,\n        top = _elBoundingClientRect.top,\n        left = _elBoundingClientRect.left,\n        width = _elBoundingClientRect.width,\n        height = _elBoundingClientRect.height;\n    var transformOrigin;\n\n    if (!isMultiple) {\n      var centerX = width / 2;\n      var centerY = height / 2;\n      var coordX = clientX - left;\n      var coordY = clientY - top;\n      rotateY = params.rotateYMax * (coordX - centerX) / (width / 2) * -1;\n      rotateX = params.rotateXMax * (coordY - centerY) / (height / 2);\n    } else {\n      var _eventsElBoundingClie = eventsElBoundingClientRect,\n          parentTop = _eventsElBoundingClie.top,\n          parentLeft = _eventsElBoundingClie.left,\n          parentWidth = _eventsElBoundingClie.width,\n          parentHeight = _eventsElBoundingClie.height;\n      var offsetLeft = left - parentLeft;\n      var offsetTop = top - parentTop;\n\n      var _centerX = width / 2 + offsetLeft;\n\n      var _centerY = height / 2 + offsetTop;\n\n      var _coordX = clientX - parentLeft;\n\n      var _coordY = clientY - parentTop;\n\n      rotateY = params.rotateYMax * (_coordX - _centerX) / (parentWidth - width / 2) * -1;\n      rotateX = params.rotateXMax * (_coordY - _centerY) / (parentHeight - height / 2);\n      transformOrigin = clientX - left + \"px \" + (clientY - top) + \"px\";\n    }\n\n    rotateX = Math.min(Math.max(-rotateX, -params.rotateXMax), params.rotateXMax);\n    if (params.rotateXInvert) rotateX = -rotateX;\n    rotateY = Math.min(Math.max(-rotateY, -params.rotateYMax), params.rotateYMax);\n    if (params.rotateYInvert) rotateY = -rotateY;\n    var rotateXPercentage = rotateX / params.rotateXMax * 100;\n    var rotateYPercentage = rotateY / params.rotateYMax * 100;\n    var stretchX = (isMultiple ? rotateYPercentage / 100 * params.stretchX : 0) * (params.rotateYInvert ? -1 : 1);\n    var stretchY = (isMultiple ? rotateXPercentage / 100 * params.stretchY : 0) * (params.rotateXInvert ? -1 : 1);\n    var stretchZ = isMultiple ? Math.max(Math.abs(rotateXPercentage), Math.abs(rotateYPercentage)) / 100 * params.stretchZ : 0;\n    $setTransform(rotateEl, \"translate3d(\" + stretchX + \"%, \" + -stretchY + \"%, \" + -stretchZ + \"px) rotateX(\" + rotateX + \"deg) rotateY(\" + rotateY + \"deg)\");\n\n    if (transformOrigin && params.commonOrigin) {\n      $setOrigin(rotateEl, transformOrigin);\n    }\n\n    if (highlightEl) {\n      $setDuration(highlightEl, params.duration + \"ms\");\n      $setEasing(highlightEl, 'ease-out');\n      $setTransform(highlightEl, \"translate3d(\" + -rotateYPercentage * 0.25 + \"%, \" + rotateXPercentage * 0.25 + \"%, 0)\");\n      $setOpacity(highlightEl, Math.max(Math.abs(rotateXPercentage), Math.abs(rotateYPercentage)) / 100);\n    }\n\n    setChildrenOffset({\n      rotateXPercentage: rotateXPercentage,\n      rotateYPercentage: rotateYPercentage,\n      duration: params.duration + \"ms\",\n      easeOut: true\n    });\n    if (typeof params.onRotate === 'function') params.onRotate(rotateX, rotateY);\n  };\n\n  var activate = function activate() {\n    queue.push(function () {\n      return el.classList.add('atropos-active');\n    });\n    $setDuration(rotateEl, params.duration + \"ms\");\n    $setEasing(rotateEl, 'ease-out');\n    $setTransform(scaleEl, \"translate3d(0,0, \" + params.activeOffset + \"px)\");\n    $setDuration(scaleEl, params.duration + \"ms\");\n    $setEasing(scaleEl, 'ease-out');\n\n    if (shadowEl) {\n      $setDuration(shadowEl, params.duration + \"ms\");\n      $setEasing(shadowEl, 'ease-out');\n    }\n\n    self.isActive = true;\n  };\n\n  var onPointerEnter = function onPointerEnter(e) {\n    isScrolling = undefined;\n    if (e.type === 'pointerdown' && e.pointerType === 'mouse') return;\n    if (e.type === 'pointerenter' && e.pointerType !== 'mouse') return;\n\n    if (e.type === 'pointerdown') {\n      e.preventDefault();\n    }\n\n    clientXStart = e.clientX;\n    clientYStart = e.clientY;\n\n    if (params.alwaysActive) {\n      elBoundingClientRect = undefined;\n      eventsElBoundingClientRect = undefined;\n      return;\n    }\n\n    activate();\n    if (typeof params.onEnter === 'function') params.onEnter();\n  };\n\n  var onTouchMove = function onTouchMove(e) {\n    if (isScrolling === false && e.cancelable) {\n      e.preventDefault();\n    }\n  };\n\n  var onPointerMove = function onPointerMove(e) {\n    if (!params.rotate || !self.isActive) return;\n\n    if (e.pointerType !== 'mouse') {\n      if (!params.rotateTouch) return;\n      e.preventDefault();\n    }\n\n    var clientX = e.clientX,\n        clientY = e.clientY;\n    var diffX = clientX - clientXStart;\n    var diffY = clientY - clientYStart;\n\n    if (typeof params.rotateTouch === 'string' && (diffX !== 0 || diffY !== 0) && typeof isScrolling === 'undefined') {\n      if (diffX * diffX + diffY * diffY >= 25) {\n        var touchAngle = Math.atan2(Math.abs(diffY), Math.abs(diffX)) * 180 / Math.PI;\n        isScrolling = params.rotateTouch === 'scroll-y' ? touchAngle > 45 : 90 - touchAngle > 45;\n      }\n\n      if (isScrolling === false) {\n        el.classList.add('atropos-rotate-touch');\n\n        if (e.cancelable) {\n          e.preventDefault();\n        }\n      }\n    }\n\n    if (e.pointerType !== 'mouse' && isScrolling) {\n      return;\n    }\n\n    setElements(clientX, clientY);\n  };\n\n  var onPointerLeave = function onPointerLeave(e) {\n    elBoundingClientRect = undefined;\n    eventsElBoundingClientRect = undefined;\n    if (!self.isActive) return;\n    if (e && e.type === 'pointerup' && e.pointerType === 'mouse') return;\n    if (e && e.type === 'pointerleave' && e.pointerType !== 'mouse') return;\n\n    if (typeof params.rotateTouch === 'string' && isScrolling) {\n      el.classList.remove('atropos-rotate-touch');\n    }\n\n    if (params.alwaysActive) {\n      setElements();\n      if (typeof params.onRotate === 'function') params.onRotate(0, 0);\n      if (typeof params.onLeave === 'function') params.onLeave();\n      return;\n    }\n\n    queue.push(function () {\n      return el.classList.remove('atropos-active');\n    });\n    $setDuration(scaleEl, params.duration + \"ms\");\n    $setEasing(scaleEl, '');\n    $setTransform(scaleEl, \"translate3d(0,0, \" + 0 + \"px)\");\n\n    if (shadowEl) {\n      $setDuration(shadowEl, params.duration + \"ms\");\n      $setEasing(shadowEl, '');\n    }\n\n    if (highlightEl) {\n      $setDuration(highlightEl, params.duration + \"ms\");\n      $setEasing(highlightEl, '');\n      $setTransform(highlightEl, \"translate3d(0, 0, 0)\");\n      $setOpacity(highlightEl, 0);\n    }\n\n    $setDuration(rotateEl, params.duration + \"ms\");\n    $setEasing(rotateEl, '');\n    $setTransform(rotateEl, \"translate3d(0,0,0) rotateX(0deg) rotateY(0deg)\");\n    setChildrenOffset({\n      duration: params.duration + \"ms\"\n    });\n    self.isActive = false;\n    if (typeof params.onRotate === 'function') params.onRotate(0, 0);\n    if (typeof params.onLeave === 'function') params.onLeave();\n  };\n\n  var onDocumentClick = function onDocumentClick(e) {\n    var clickTarget = e.target;\n\n    if (!eventsEl.contains(clickTarget) && clickTarget !== eventsEl && self.isActive) {\n      onPointerLeave();\n    }\n  };\n\n  var initDOM = function initDOM() {\n    if (typeof el === 'string') {\n      el = $(document, el);\n    }\n\n    if (!el) return; // eslint-disable-next-line\n\n    if (el.__atropos__) return;\n\n    if (typeof eventsEl !== 'undefined') {\n      if (typeof eventsEl === 'string') {\n        eventsEl = $(document, eventsEl);\n      }\n    } else {\n      eventsEl = el;\n    }\n\n    Object.assign(self, {\n      el: el\n    });\n    rotateEl = $(el, '.atropos-rotate');\n    scaleEl = $(el, '.atropos-scale');\n    innerEl = $(el, '.atropos-inner'); // eslint-disable-next-line\n\n    el.__atropos__ = self;\n  };\n\n  var init = function init() {\n    initDOM();\n    if (!el || !eventsEl) return;\n\n    if (params.shadow) {\n      createShadow();\n    }\n\n    if (params.highlight) {\n      createHighlight();\n    }\n\n    if (params.rotateTouch) {\n      if (typeof params.rotateTouch === 'string') {\n        el.classList.add(\"atropos-rotate-touch-\" + params.rotateTouch);\n      } else {\n        el.classList.add('atropos-rotate-touch');\n      }\n    }\n\n    if ($(el, '[data-atropos-opacity]')) {\n      setChildrenOffset({\n        opacityOnly: true\n      });\n    }\n\n    $on(document, 'click', onDocumentClick);\n    $on(eventsEl, 'pointerdown', onPointerEnter);\n    $on(eventsEl, 'pointerenter', onPointerEnter);\n    $on(eventsEl, 'pointermove', onPointerMove);\n    $on(eventsEl, 'touchmove', onTouchMove);\n    $on(eventsEl, 'pointerleave', onPointerLeave);\n    $on(eventsEl, 'pointerup', onPointerLeave);\n    $on(eventsEl, 'lostpointercapture', onPointerLeave);\n\n    if (params.alwaysActive) {\n      activate();\n      setElements();\n    }\n  };\n\n  var destroy = function destroy() {\n    self.destroyed = true;\n    cancelAnimationFrame(queueFrameId);\n    $off(document, 'click', onDocumentClick);\n    $off(eventsEl, 'pointerdown', onPointerEnter);\n    $off(eventsEl, 'pointerenter', onPointerEnter);\n    $off(eventsEl, 'pointermove', onPointerMove);\n    $off(eventsEl, 'touchmove', onTouchMove);\n    $off(eventsEl, 'pointerleave', onPointerLeave);\n    $off(eventsEl, 'pointerup', onPointerLeave);\n    $off(eventsEl, 'lostpointercapture', onPointerLeave); // eslint-disable-next-line\n\n    delete el.__atropos__;\n  };\n\n  self.destroy = destroy;\n  init(); // eslint-disable-next-line\n\n  return self;\n}\n\nexport { Atropos, Atropos as default };","map":{"version":3,"sources":["/Users/macsauce/Documents/GitHub/portfolio-rc/portfolio/node_modules/atropos/esm/atropos.esm.js"],"names":["_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","$","el","sel","querySelector","$$","querySelectorAll","removeUndefinedProps","obj","result","keys","forEach","Atropos","originalParams","_originalParams","eventsEl","self","__atropos__","params","alwaysActive","activeOffset","shadowOffset","shadowScale","duration","rotate","rotateTouch","rotateXMax","rotateYMax","rotateXInvert","rotateYInvert","stretchX","stretchY","stretchZ","commonOrigin","shadow","highlight","onEnter","onLeave","onRotate","destroyed","isActive","rotateEl","scaleEl","innerEl","elBoundingClientRect","eventsElBoundingClientRect","shadowEl","highlightEl","isScrolling","clientXStart","clientYStart","queue","queueFrameId","purgeQueue","requestAnimationFrame","data","element","prop","value","style","splice","$setDuration","push","$setEasing","$setTransform","$setOpacity","$setOrigin","$on","event","handler","props","addEventListener","$off","removeEventListener","createShadow","created","document","createElement","classList","add","appendChild","createHighlight","setChildrenOffset","_ref","_ref$rotateXPercentag","rotateXPercentage","_ref$rotateYPercentag","rotateYPercentage","opacityOnly","easeOut","getOpacity","dataset","atroposOpacity","split","map","v","parseFloat","undefined","childEl","elementOpacity","childElOffset","atroposOffset","Number","isNaN","min","max","rotatePercentage","Math","abs","setElements","clientX","clientY","isMultiple","getBoundingClientRect","rect","left","width","top","height","rotateX","rotateY","_elBoundingClientRect","transformOrigin","centerX","centerY","coordX","coordY","_eventsElBoundingClie","parentTop","parentLeft","parentWidth","parentHeight","offsetLeft","offsetTop","_centerX","_centerY","_coordX","_coordY","activate","onPointerEnter","e","type","pointerType","preventDefault","onTouchMove","cancelable","onPointerMove","diffX","diffY","touchAngle","atan2","PI","onPointerLeave","remove","onDocumentClick","clickTarget","contains","initDOM","init","destroy","cancelAnimationFrame","default"],"mappings":"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","sourcesContent":["/**\n * Atropos 1.0.1\n * Touch-friendly 3D parallax hover effects\n * https://atroposjs.com\n *\n * Copyright 2021-2021 \n *\n * Released under the MIT License\n *\n * Released on: October 18, 2021\n */\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\n/* eslint-disable no-restricted-globals */\nvar $ = function $(el, sel) {\n  return el.querySelector(sel);\n};\n\nvar $$ = function $$(el, sel) {\n  return el.querySelectorAll(sel);\n};\n\nvar removeUndefinedProps = function removeUndefinedProps(obj) {\n  if (obj === void 0) {\n    obj = {};\n  }\n\n  var result = {};\n  Object.keys(obj).forEach(function (key) {\n    if (typeof obj[key] !== 'undefined') result[key] = obj[key];\n  });\n  return result;\n};\n\nfunction Atropos(originalParams) {\n  if (originalParams === void 0) {\n    originalParams = {};\n  }\n\n  var _originalParams = originalParams,\n      el = _originalParams.el,\n      eventsEl = _originalParams.eventsEl;\n  var self = {\n    __atropos__: true,\n    params: _extends({\n      alwaysActive: false,\n      activeOffset: 50,\n      shadowOffset: 50,\n      shadowScale: 1,\n      duration: 300,\n      rotate: true,\n      rotateTouch: true,\n      rotateXMax: 15,\n      rotateYMax: 15,\n      rotateXInvert: false,\n      rotateYInvert: false,\n      stretchX: 0,\n      stretchY: 0,\n      stretchZ: 0,\n      commonOrigin: true,\n      shadow: true,\n      highlight: true,\n      onEnter: null,\n      onLeave: null,\n      onRotate: null\n    }, removeUndefinedProps(originalParams || {})),\n    destroyed: false,\n    isActive: false\n  };\n  var params = self.params;\n  var rotateEl;\n  var scaleEl;\n  var innerEl;\n  var elBoundingClientRect;\n  var eventsElBoundingClientRect;\n  var shadowEl;\n  var highlightEl;\n  var isScrolling;\n  var clientXStart;\n  var clientYStart;\n  var queue = [];\n  var queueFrameId;\n\n  var purgeQueue = function purgeQueue() {\n    queueFrameId = requestAnimationFrame(function () {\n      queue.forEach(function (data) {\n        if (typeof data === 'function') {\n          data();\n        } else {\n          var element = data.element,\n              prop = data.prop,\n              value = data.value;\n          element.style[prop] = value;\n        }\n      });\n      queue.splice(0, queue.length);\n      purgeQueue();\n    });\n  };\n\n  purgeQueue();\n\n  var $setDuration = function $setDuration(element, value) {\n    queue.push({\n      element: element,\n      prop: 'transitionDuration',\n      value: value\n    });\n  };\n\n  var $setEasing = function $setEasing(element, value) {\n    queue.push({\n      element: element,\n      prop: 'transitionTimingFunction',\n      value: value\n    });\n  };\n\n  var $setTransform = function $setTransform(element, value) {\n    queue.push({\n      element: element,\n      prop: 'transform',\n      value: value\n    });\n  };\n\n  var $setOpacity = function $setOpacity(element, value) {\n    queue.push({\n      element: element,\n      prop: 'opacity',\n      value: value\n    });\n  };\n\n  var $setOrigin = function $setOrigin(element, value) {\n    queue.push({\n      element: element,\n      prop: 'transformOrigin',\n      value: value\n    });\n  };\n\n  var $on = function $on(element, event, handler, props) {\n    return element.addEventListener(event, handler, props);\n  };\n\n  var $off = function $off(element, event, handler, props) {\n    return element.removeEventListener(event, handler, props);\n  };\n\n  var createShadow = function createShadow() {\n    var created;\n    shadowEl = $(el, '.atropos-shadow');\n\n    if (!shadowEl) {\n      shadowEl = document.createElement('span');\n      shadowEl.classList.add('atropos-shadow');\n      created = true;\n    }\n\n    $setTransform(shadowEl, \"translate3d(0,0,-\" + params.shadowOffset + \"px) scale(\" + params.shadowScale + \")\");\n\n    if (created) {\n      rotateEl.appendChild(shadowEl);\n    }\n  };\n\n  var createHighlight = function createHighlight() {\n    var created;\n    highlightEl = $(el, '.atropos-highlight');\n\n    if (!highlightEl) {\n      highlightEl = document.createElement('span');\n      highlightEl.classList.add('atropos-highlight');\n      created = true;\n    }\n\n    $setTransform(highlightEl, \"translate3d(0,0,0)\");\n\n    if (created) {\n      innerEl.appendChild(highlightEl);\n    }\n  };\n\n  var setChildrenOffset = function setChildrenOffset(_ref) {\n    var _ref$rotateXPercentag = _ref.rotateXPercentage,\n        rotateXPercentage = _ref$rotateXPercentag === void 0 ? 0 : _ref$rotateXPercentag,\n        _ref$rotateYPercentag = _ref.rotateYPercentage,\n        rotateYPercentage = _ref$rotateYPercentag === void 0 ? 0 : _ref$rotateYPercentag,\n        duration = _ref.duration,\n        opacityOnly = _ref.opacityOnly,\n        easeOut = _ref.easeOut;\n\n    var getOpacity = function getOpacity(element) {\n      if (element.dataset.atroposOpacity && typeof element.dataset.atroposOpacity === 'string') {\n        return element.dataset.atroposOpacity.split(';').map(function (v) {\n          return parseFloat(v);\n        });\n      }\n\n      return undefined;\n    };\n\n    $$(el, '[data-atropos-offset], [data-atropos-opacity]').forEach(function (childEl) {\n      $setDuration(childEl, duration);\n      $setEasing(childEl, easeOut ? 'ease-out' : '');\n      var elementOpacity = getOpacity(childEl);\n\n      if (rotateXPercentage === 0 && rotateYPercentage === 0) {\n        if (!opacityOnly) $setTransform(childEl, \"translate3d(0, 0, 0)\");\n        if (elementOpacity) $setOpacity(childEl, elementOpacity[0]);\n      } else {\n        var childElOffset = parseFloat(childEl.dataset.atroposOffset) / 100;\n\n        if (!Number.isNaN(childElOffset) && !opacityOnly) {\n          $setTransform(childEl, \"translate3d(\" + -rotateYPercentage * -childElOffset + \"%, \" + rotateXPercentage * -childElOffset + \"%, 0)\");\n        }\n\n        if (elementOpacity) {\n          var min = elementOpacity[0],\n              max = elementOpacity[1];\n          var rotatePercentage = Math.max(Math.abs(rotateXPercentage), Math.abs(rotateYPercentage));\n          $setOpacity(childEl, min + (max - min) * rotatePercentage / 100);\n        }\n      }\n    });\n  };\n\n  var setElements = function setElements(clientX, clientY) {\n    var isMultiple = el !== eventsEl;\n\n    if (!elBoundingClientRect) {\n      elBoundingClientRect = el.getBoundingClientRect();\n    }\n\n    if (isMultiple && !eventsElBoundingClientRect) {\n      eventsElBoundingClientRect = eventsEl.getBoundingClientRect();\n    }\n\n    if (typeof clientX === 'undefined' && typeof clientY === 'undefined') {\n      var rect = isMultiple ? eventsElBoundingClientRect : elBoundingClientRect;\n      clientX = rect.left + rect.width / 2;\n      clientY = rect.top + rect.height / 2;\n    }\n\n    var rotateX = 0;\n    var rotateY = 0;\n    var _elBoundingClientRect = elBoundingClientRect,\n        top = _elBoundingClientRect.top,\n        left = _elBoundingClientRect.left,\n        width = _elBoundingClientRect.width,\n        height = _elBoundingClientRect.height;\n    var transformOrigin;\n\n    if (!isMultiple) {\n      var centerX = width / 2;\n      var centerY = height / 2;\n      var coordX = clientX - left;\n      var coordY = clientY - top;\n      rotateY = params.rotateYMax * (coordX - centerX) / (width / 2) * -1;\n      rotateX = params.rotateXMax * (coordY - centerY) / (height / 2);\n    } else {\n      var _eventsElBoundingClie = eventsElBoundingClientRect,\n          parentTop = _eventsElBoundingClie.top,\n          parentLeft = _eventsElBoundingClie.left,\n          parentWidth = _eventsElBoundingClie.width,\n          parentHeight = _eventsElBoundingClie.height;\n      var offsetLeft = left - parentLeft;\n      var offsetTop = top - parentTop;\n\n      var _centerX = width / 2 + offsetLeft;\n\n      var _centerY = height / 2 + offsetTop;\n\n      var _coordX = clientX - parentLeft;\n\n      var _coordY = clientY - parentTop;\n\n      rotateY = params.rotateYMax * (_coordX - _centerX) / (parentWidth - width / 2) * -1;\n      rotateX = params.rotateXMax * (_coordY - _centerY) / (parentHeight - height / 2);\n      transformOrigin = clientX - left + \"px \" + (clientY - top) + \"px\";\n    }\n\n    rotateX = Math.min(Math.max(-rotateX, -params.rotateXMax), params.rotateXMax);\n    if (params.rotateXInvert) rotateX = -rotateX;\n    rotateY = Math.min(Math.max(-rotateY, -params.rotateYMax), params.rotateYMax);\n    if (params.rotateYInvert) rotateY = -rotateY;\n    var rotateXPercentage = rotateX / params.rotateXMax * 100;\n    var rotateYPercentage = rotateY / params.rotateYMax * 100;\n    var stretchX = (isMultiple ? rotateYPercentage / 100 * params.stretchX : 0) * (params.rotateYInvert ? -1 : 1);\n    var stretchY = (isMultiple ? rotateXPercentage / 100 * params.stretchY : 0) * (params.rotateXInvert ? -1 : 1);\n    var stretchZ = isMultiple ? Math.max(Math.abs(rotateXPercentage), Math.abs(rotateYPercentage)) / 100 * params.stretchZ : 0;\n    $setTransform(rotateEl, \"translate3d(\" + stretchX + \"%, \" + -stretchY + \"%, \" + -stretchZ + \"px) rotateX(\" + rotateX + \"deg) rotateY(\" + rotateY + \"deg)\");\n\n    if (transformOrigin && params.commonOrigin) {\n      $setOrigin(rotateEl, transformOrigin);\n    }\n\n    if (highlightEl) {\n      $setDuration(highlightEl, params.duration + \"ms\");\n      $setEasing(highlightEl, 'ease-out');\n      $setTransform(highlightEl, \"translate3d(\" + -rotateYPercentage * 0.25 + \"%, \" + rotateXPercentage * 0.25 + \"%, 0)\");\n      $setOpacity(highlightEl, Math.max(Math.abs(rotateXPercentage), Math.abs(rotateYPercentage)) / 100);\n    }\n\n    setChildrenOffset({\n      rotateXPercentage: rotateXPercentage,\n      rotateYPercentage: rotateYPercentage,\n      duration: params.duration + \"ms\",\n      easeOut: true\n    });\n    if (typeof params.onRotate === 'function') params.onRotate(rotateX, rotateY);\n  };\n\n  var activate = function activate() {\n    queue.push(function () {\n      return el.classList.add('atropos-active');\n    });\n    $setDuration(rotateEl, params.duration + \"ms\");\n    $setEasing(rotateEl, 'ease-out');\n    $setTransform(scaleEl, \"translate3d(0,0, \" + params.activeOffset + \"px)\");\n    $setDuration(scaleEl, params.duration + \"ms\");\n    $setEasing(scaleEl, 'ease-out');\n\n    if (shadowEl) {\n      $setDuration(shadowEl, params.duration + \"ms\");\n      $setEasing(shadowEl, 'ease-out');\n    }\n\n    self.isActive = true;\n  };\n\n  var onPointerEnter = function onPointerEnter(e) {\n    isScrolling = undefined;\n    if (e.type === 'pointerdown' && e.pointerType === 'mouse') return;\n    if (e.type === 'pointerenter' && e.pointerType !== 'mouse') return;\n\n    if (e.type === 'pointerdown') {\n      e.preventDefault();\n    }\n\n    clientXStart = e.clientX;\n    clientYStart = e.clientY;\n\n    if (params.alwaysActive) {\n      elBoundingClientRect = undefined;\n      eventsElBoundingClientRect = undefined;\n      return;\n    }\n\n    activate();\n    if (typeof params.onEnter === 'function') params.onEnter();\n  };\n\n  var onTouchMove = function onTouchMove(e) {\n    if (isScrolling === false && e.cancelable) {\n      e.preventDefault();\n    }\n  };\n\n  var onPointerMove = function onPointerMove(e) {\n    if (!params.rotate || !self.isActive) return;\n\n    if (e.pointerType !== 'mouse') {\n      if (!params.rotateTouch) return;\n      e.preventDefault();\n    }\n\n    var clientX = e.clientX,\n        clientY = e.clientY;\n    var diffX = clientX - clientXStart;\n    var diffY = clientY - clientYStart;\n\n    if (typeof params.rotateTouch === 'string' && (diffX !== 0 || diffY !== 0) && typeof isScrolling === 'undefined') {\n      if (diffX * diffX + diffY * diffY >= 25) {\n        var touchAngle = Math.atan2(Math.abs(diffY), Math.abs(diffX)) * 180 / Math.PI;\n        isScrolling = params.rotateTouch === 'scroll-y' ? touchAngle > 45 : 90 - touchAngle > 45;\n      }\n\n      if (isScrolling === false) {\n        el.classList.add('atropos-rotate-touch');\n\n        if (e.cancelable) {\n          e.preventDefault();\n        }\n      }\n    }\n\n    if (e.pointerType !== 'mouse' && isScrolling) {\n      return;\n    }\n\n    setElements(clientX, clientY);\n  };\n\n  var onPointerLeave = function onPointerLeave(e) {\n    elBoundingClientRect = undefined;\n    eventsElBoundingClientRect = undefined;\n    if (!self.isActive) return;\n    if (e && e.type === 'pointerup' && e.pointerType === 'mouse') return;\n    if (e && e.type === 'pointerleave' && e.pointerType !== 'mouse') return;\n\n    if (typeof params.rotateTouch === 'string' && isScrolling) {\n      el.classList.remove('atropos-rotate-touch');\n    }\n\n    if (params.alwaysActive) {\n      setElements();\n      if (typeof params.onRotate === 'function') params.onRotate(0, 0);\n      if (typeof params.onLeave === 'function') params.onLeave();\n      return;\n    }\n\n    queue.push(function () {\n      return el.classList.remove('atropos-active');\n    });\n    $setDuration(scaleEl, params.duration + \"ms\");\n    $setEasing(scaleEl, '');\n    $setTransform(scaleEl, \"translate3d(0,0, \" + 0 + \"px)\");\n\n    if (shadowEl) {\n      $setDuration(shadowEl, params.duration + \"ms\");\n      $setEasing(shadowEl, '');\n    }\n\n    if (highlightEl) {\n      $setDuration(highlightEl, params.duration + \"ms\");\n      $setEasing(highlightEl, '');\n      $setTransform(highlightEl, \"translate3d(0, 0, 0)\");\n      $setOpacity(highlightEl, 0);\n    }\n\n    $setDuration(rotateEl, params.duration + \"ms\");\n    $setEasing(rotateEl, '');\n    $setTransform(rotateEl, \"translate3d(0,0,0) rotateX(0deg) rotateY(0deg)\");\n    setChildrenOffset({\n      duration: params.duration + \"ms\"\n    });\n    self.isActive = false;\n    if (typeof params.onRotate === 'function') params.onRotate(0, 0);\n    if (typeof params.onLeave === 'function') params.onLeave();\n  };\n\n  var onDocumentClick = function onDocumentClick(e) {\n    var clickTarget = e.target;\n\n    if (!eventsEl.contains(clickTarget) && clickTarget !== eventsEl && self.isActive) {\n      onPointerLeave();\n    }\n  };\n\n  var initDOM = function initDOM() {\n    if (typeof el === 'string') {\n      el = $(document, el);\n    }\n\n    if (!el) return; // eslint-disable-next-line\n\n    if (el.__atropos__) return;\n\n    if (typeof eventsEl !== 'undefined') {\n      if (typeof eventsEl === 'string') {\n        eventsEl = $(document, eventsEl);\n      }\n    } else {\n      eventsEl = el;\n    }\n\n    Object.assign(self, {\n      el: el\n    });\n    rotateEl = $(el, '.atropos-rotate');\n    scaleEl = $(el, '.atropos-scale');\n    innerEl = $(el, '.atropos-inner'); // eslint-disable-next-line\n\n    el.__atropos__ = self;\n  };\n\n  var init = function init() {\n    initDOM();\n    if (!el || !eventsEl) return;\n\n    if (params.shadow) {\n      createShadow();\n    }\n\n    if (params.highlight) {\n      createHighlight();\n    }\n\n    if (params.rotateTouch) {\n      if (typeof params.rotateTouch === 'string') {\n        el.classList.add(\"atropos-rotate-touch-\" + params.rotateTouch);\n      } else {\n        el.classList.add('atropos-rotate-touch');\n      }\n    }\n\n    if ($(el, '[data-atropos-opacity]')) {\n      setChildrenOffset({\n        opacityOnly: true\n      });\n    }\n\n    $on(document, 'click', onDocumentClick);\n    $on(eventsEl, 'pointerdown', onPointerEnter);\n    $on(eventsEl, 'pointerenter', onPointerEnter);\n    $on(eventsEl, 'pointermove', onPointerMove);\n    $on(eventsEl, 'touchmove', onTouchMove);\n    $on(eventsEl, 'pointerleave', onPointerLeave);\n    $on(eventsEl, 'pointerup', onPointerLeave);\n    $on(eventsEl, 'lostpointercapture', onPointerLeave);\n\n    if (params.alwaysActive) {\n      activate();\n      setElements();\n    }\n  };\n\n  var destroy = function destroy() {\n    self.destroyed = true;\n    cancelAnimationFrame(queueFrameId);\n    $off(document, 'click', onDocumentClick);\n    $off(eventsEl, 'pointerdown', onPointerEnter);\n    $off(eventsEl, 'pointerenter', onPointerEnter);\n    $off(eventsEl, 'pointermove', onPointerMove);\n    $off(eventsEl, 'touchmove', onTouchMove);\n    $off(eventsEl, 'pointerleave', onPointerLeave);\n    $off(eventsEl, 'pointerup', onPointerLeave);\n    $off(eventsEl, 'lostpointercapture', onPointerLeave); // eslint-disable-next-line\n\n    delete el.__atropos__;\n  };\n\n  self.destroy = destroy;\n  init(); // eslint-disable-next-line\n\n  return self;\n}\n\nexport { Atropos, Atropos as default };\n"]},"metadata":{},"sourceType":"module"}